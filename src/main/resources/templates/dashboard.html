<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Application Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .tab-content {
            padding: 20px;
        }
        .nav-tabs {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1 class="mb-4">Application Dashboard</h1>
        
        <ul class="nav nav-tabs" id="appTabs" role="tablist">
            <li class="nav-item" th:each="app, appStat : ${applications}">
                <a class="nav-link" th:classappend="${appStat.first} ? 'active'" 
                   th:id="'app-' + ${appStat.index} + '-tab'"
                   data-bs-toggle="tab" 
                   th:data-bs-target="'#app-' + ${appStat.index}"
                   role="tab" 
                   th:text="${app.name}">
                </a>
            </li>
        </ul>

        <div class="tab-content" id="appTabContent">
            <div class="tab-pane fade" th:each="app, appStat : ${applications}"
                 th:classappend="${appStat.first} ? 'show active'"
                 th:id="'app-' + ${appStat.index}"
                 role="tabpanel">
                
                <div class="card mb-4" th:each="env : ${app.environments}">
                    <div class="card-header">
                        <h4 th:text="${env.name + ' Environment'}"></h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Server Name</th>
                                        <th>IP Address</th>
                                        <th>OS</th>
                                        <th>Services</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="server : ${env.servers}">
                                        <td th:text="${server.name}"></td>
                                        <td th:text="${server.ip}"></td>
                                        <td th:text="${server.os}"></td>
                                        <td>
                                            <table class="table table-sm">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Type</th>
                                                        <th>Command/Script</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr th:each="service : ${server.services}">
                                                        <td th:text="${service.name}"></td>
                                                        <td th:text="${service.type}"></td>
                                                        <td>
                                                            <span th:if="${service.cmd}" th:text="${service.cmd}"></span>
                                                            <span th:if="${service.startScript}" th:text="${service.startScript}"></span>
                                                            <span th:if="${service.dbType}" th:text="${service.dbType + ' - ' + service.tnsAlias}"></span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 